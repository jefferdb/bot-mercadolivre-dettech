<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Mercado Livre - Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #3483fa, #2968c8); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(52, 131, 250, 0.3); }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 1.1em; }
        .nav { display: flex; gap: 15px; margin-top: 25px; flex-wrap: wrap; }
        .nav a { padding: 12px 24px; background: rgba(255,255,255,0.2); color: white; text-decoration: none; border-radius: 8px; transition: all 0.3s; backdrop-filter: blur(10px); }
        .nav a:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); transition: transform 0.3s; }
        .stat-card:hover { transform: translateY(-5px); }
        .stat-number { font-size: 3em; font-weight: bold; color: #3483fa; margin-bottom: 10px; }
        .stat-label { color: #666; font-size: 1.1em; font-weight: 500; }
        .status { padding: 30px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .status.connected { border-left: 6px solid #00a650; }
        .status.disconnected { border-left: 6px solid #ff6b6b; }
        .status.error { border-left: 6px solid #ff9500; }
        .status h3 { margin-bottom: 15px; font-size: 1.4em; }
        .status p { color: #666; line-height: 1.6; margin-bottom: 10px; }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
        .success-rate { color: #00a650; }
        .success-rate.low { color: #ff6b6b; }
        .success-rate.medium { color: #ff9500; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ Bot do Mercado Livre</h1>
            <p>Sistema Automatizado de Respostas - Vers√£o 2.0</p>
            <div class="nav">
                <a href="/">üìä Dashboard</a>
                <a href="/rules">üìã Regras</a>
                <a href="/questions">‚ùì Perguntas</a>
                <a href="/absence">üåô Aus√™ncia</a>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">{{ stats.total }}</div>
                <div class="stat-label">Total de Perguntas</div>
            </div>
            <div class="stat-card">
                <div class="stat-number pulse">{{ stats.answered }}</div>
                <div class="stat-label">Respondidas Automaticamente</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ stats.pending }}</div>
                <div class="stat-label">Aguardando Resposta</div>
            </div>
            <div class="stat-card">
                <div class="stat-number success-rate {% if stats.success_rate >= 80 %}{% elif stats.success_rate >= 50 %}medium{% else %}low{% endif %}">{{ stats.success_rate }}%</div>
                <div class="stat-label">Taxa de Sucesso</div>
            </div>
        </div>

        <div class="status {{ status }}">
            {% if status == 'connected' %}
                <h3>‚úÖ Status da Conex√£o: Conectado</h3>
                <p><strong>Token V√°lido:</strong> {% if token_valid %}‚úÖ Sim{% else %}‚ùå N√£o{% endif %}</p>
                <p><strong>Monitoramento:</strong> ‚úÖ Ativo (verifica a cada 60 segundos)</p>
                <p><strong>√öltima Verifica√ß√£o:</strong> Agora mesmo</p>
                <p>üöÄ Bot funcionando normalmente e respondendo perguntas automaticamente!</p>
            {% elif status == 'disconnected' %}
                <h3>‚ùå Status da Conex√£o: Desconectado</h3>
                <p>‚ö†Ô∏è Verifique suas credenciais do Mercado Livre.</p>
                <p>üîß Acesse as configura√ß√µes para reconectar.</p>
            {% else %}
                <h3>‚ö†Ô∏è Status da Conex√£o: Erro</h3>
                <p><strong>Erro:</strong> {{ error }}</p>
                <p>üîÑ O sistema tentar√° reconectar automaticamente.</p>
            {% endif %}
        </div>
    </div>

    <script>
        // Auto-refresh a cada 30 segundos
        setTimeout(() => {
            location.reload();
        }, 30000);
    </script>
</body>
</html>

